; Created by PMAC Win32 Driver from:\\psf\Home\Desktop\IDMacroRingTest\pmac\LinearEncoderTest\PLC02_Home.pmc
;
;\\psf\Home\Desktop\IDMacroRingTest\pmac\LinearEncoderTest\PLC02_Home.pmc
P200 = 0;3
P201 = 0;6
Open PLC 2 Clear;8
P200 = 0;12
P201 = 1;15
P210=I114       ;18
P211=I514       ;19
P212=I7012      ;20
P213=I7112      ;21
P214=I7013      ;23
P215=I7113      ;24
P216=I123       ;25
P217=I523       ;26
P218=I126       ;27
P219=I526       ;28
P220=I124       ;30
P221=I524       ;31
I114=0          ;34
I514=0          ;35
I7012=2         ;36
I7112=2         ;37
I7013=1         ;38
I7113=1         ;39
I123=-ABS(I123) ;40
I523=-ABS(I523) ;41
I126=0    ;42
I526=0    ;43
I124=$820401    ;44
I524=$820401    ;45
CMD"#1$";49
CMD"#2$";50
CMD"#5$";51
CMD"#6$";52
I5111 = 200 * 8388608/I10 While(I5111 > 0)EndW;53
I124=P220       ;56
I524=P221       ;57
if (P201=1);61
  M145=0    ;63
  M545=0    ;64
  ;69
  if (P201=1);70
    CMD "#1j:200000#5j:200000"    ;71
    I5111 = 20 * 8388608/I10 ;72
    while (I5111 > 0);73
    endw;74
    I5111 = 60000 * 8388608/I10 ;76
    while (M140=0) ;77
    and (M142=0) ;78
    and (I5111 > 0) ;79
    and (P201 = 1) ;80
    endw;81
    while (M540=0) ;83
    and (M542=0) ;84
    and (I5111 > 0) ;85
    and (P201 = 1) ;86
    endw;87
    ;90
    if (M142=1) ;91
    or (M542=1);92
      P201 = 4;93
    endif;94
    if (I5111<0 or I5111=0) ;95
      P201 = 31;96
    endif;97
  endif;98
  ;100
  if (P201=1);101
    CMD "#1hm #5hm"    ;102
    ;103
    I5111 = 20 * 8388608/I10 ;104
    while (I5111 > 0);105
    endw;106
    ;108
    I5111 = 60000 * 8388608/I10;109
    while (M140=0) ;111
    and (M142=0) ;112
    and (I5111 > 0) ;113
    and (P201 = 1) ;114
    endw;115
    while (M540=0) ;117
    and (M542=0) ;118
    ;119
    and (P201 = 1) ;120
    endw;121
    ;123
    if (M142=1) ;124
    or (M542=1);125
      P201 = 4;126
    endif;127
    if (I5111<0 or I5111=0) ;128
      P201 = 32;129
    endif;130
  endif;131
  ;134
  if (P201=1);135
    ;137
    I5111 = 1000 * 8388608/I10 ;138
    while (I5111 > 0);139
    endw;140
    CMD"#1j:1500000 #5j:1500000";142
    ;144
    I5111 = 20 * 8388608/I10 ;145
    while (I5111 > 0);146
    endw;147
    I5111 = 60000 * 8388608/I10 ;149
    while (M140=0) ;150
    and (M142=0) ;151
    and (M130=0) ;152
    and (I5111 > 0) ;153
    and (P201 = 1) ;154
    endw;155
    while (M540=0) ;157
    and (M542=0) ;158
    and (M530=0) ;159
    and (I5111 > 0) ;160
    and (P201 = 1) ;161
    endw;162
    ;165
    if (M142=1) ;166
    or (M542=1);167
      P201 = 4;168
    endif;169
    if (M130=1) ;170
    or (M530=1);171
      P201 = 5;172
    endif;173
    if (I5111<0 or I5111=0) ;174
      P201 = 33;175
    endif;176
  endif;177
endif;178
if (P201 = 1);181
  ;182
  P201=0;183
  P200=7;184
endif;185
if (M142=0);190
  CMD"#1hmz #2hmz";191
  I5112 = 20 * 8388608/I10 ;192
  while (I5112 > 0);193
  endw;194
  ;195
  ;196
  ;197
  ;198
endif;199
if (M542=0);200
  CMD"#5hmz #6hmz";201
  I5112 = 20 * 8388608/I10 ;202
  while (I5112 > 0);203
  endw;204
  ;205
  ;206
  ;207
  ;208
endif;209
I5111 = 500 * 8388608/I10 ;211
while (I5111 > 0);212
endw;213
I114=P210;216
I114 = P210;218
I514 = P211;219
I7012= P212;220
I7022= P213;221
I7013= P214;222
I7023= P215;223
I123 = P216;224
I523 = P217;225
I126 = P218;226
I526 = P219;227
Dis PLC 2;231
Close;232
CLOSE
